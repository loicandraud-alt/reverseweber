<aside class="sidebar">
  <header class="sidebar__header">
    <h2>Votre projet</h2>
    <p>Affinez vos paramètres pour personnaliser le rendu.</p>
  </header>

  <section class="sidebar__section">
    <h3>Ambiance sélectionnée</h3>
    <div class="sidebar__surface">
      <span class="surface-indicator" [style.background]="surface.accentColour"></span>
      <div>
        <strong>{{ surface.name }}</strong>
        <p>{{ surface.zones.length }} zones à personnaliser</p>
      </div>
    </div>
  </section>

  <section class="sidebar__section">
    <h3>Choisir une ambiance</h3>
    <div class="sidebar__categories">
      <details *ngFor="let category of categories" [open]="category.id === surface.category">
        <summary>{{ category.label }}</summary>
        <ul>
          <li *ngFor="let option of surfacesByCategory(category.id); trackBy: trackBySurface">
            <button
              type="button"
              class="surface-option"
              [class.surface-option--active]="option.id === surface.id"
              (click)="surfaceChange.emit(option.id)"
            >
              <span class="surface-option__preview" [style.background]="option.accentColour"></span>
              <span>{{ option.name }}</span>
            </button>
          </li>
        </ul>
      </details>
    </div>
  </section>

  <section class="sidebar__section sidebar__section--zones">
    <h3>Zones à personnaliser</h3>
    <app-surface-legend [surface]="surface" [selectedColours]="selectedColours"></app-surface-legend>
  </section>
</aside>
